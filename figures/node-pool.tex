\scalebox{0.50}{
\tikz{
\tikzstyle{block}=[draw, inner sep=0pt, outer sep=0pt, minimum width=1.8cm, minimum height=1.2cm, rounded corners=1mm, align=center, fill=black!50]

\node[draw, densely dotted, thick, minimum width=8cm, minimum height=1.7cm, rounded corners=2mm] (r1) at (0,0)  {};
\node[draw, densely dotted, thick, minimum width=8cm, minimum height=1.7cm, rounded corners=2mm, left=3mm of r1] (r2) {};

\node[fill=white, anchor=west, xshift=2mm] at (r2.north west) {\footnotesize\textbf{Node Pool}};

\node[block, anchor=west, text=white] (a) at ([xshift=3mm]r1.west) {Node A};
\node[block,right=.3cm of a, text=white] (b) {Node B}; 

\node[block, anchor=west, text=white] (a1) at ([xshift=3mm]r2.west) {Node A};
\node[block,below=.55cm of a1, text=white] (b1) {Node B}; 
% %---------
\node[minimum width=1.75cm, minimum height=1.2cm, anchor=south west] (1) at ([yshift=3mm]r2.north west) {};
\draw (1.north west)--coordinate[pos=1] (w) ($(1.west)+(.5,0)$)--(1.south west)--(1.south east)--coordinate[pos=1] (z) ($(1.east)+(.5,0)$)--(1.north east)--cycle;
\node[align=center, font=\scriptsize] at($(w)!.4!(z)$) {Workload\\1};

\node[minimum width=1.75cm, minimum height=1.2cm, right=1.3mm of 1] (1) {};
\draw (1.north west)--coordinate[pos=1] (w) ($(1.west)+(.5,0)$)--(1.south west)--(1.south east)--coordinate[pos=1] (z) ($(1.east)+(.5,0)$)--(1.north east)--cycle;

\node[minimum width=1.75cm, minimum height=1.2cm, right=1.3mm of 1] (1) {};
\draw (1.north west)--coordinate[pos=1] (w) ($(1.west)+(.5,0)$)--(1.south west)--(1.south east)--coordinate[pos=1] (z) ($(1.east)+(.5,0)$)--(1.north east)--cycle;
\node[align=center, font=\scriptsize] at($(w)!.4!(z)$) {Workload\\2};

\node[minimum width=1.75cm, minimum height=1.2cm, right=1.3mm of 1] (1) {};
\draw (1.north west)--coordinate[pos=1] (w) ($(1.west)+(.5,0)$)--(1.south west)--(1.south east)--coordinate[pos=1] (z) ($(1.east)+(.5,0)$)--(1.north east)--cycle;
\node[align=center, font=\scriptsize] at($(w)!.4!(z)$) {Workload\\3\\Workload\\4};



\node[minimum width=1.75cm, minimum height=1.2cm, anchor=south west] (1) at ([yshift=3mm]r1.north west) {};
\draw (1.north west)--coordinate[pos=1] (w) ($(1.west)+(.5,0)$)--(1.south west)--(1.south east)--coordinate[pos=1] (z) ($(1.east)+(.5,0)$)--(1.north east)--cycle;
\node[align=center, font=\scriptsize] at($(w)!.4!(z)$) {Workload\\5};

\node[minimum width=1.75cm, minimum height=1.2cm, right=1.3mm of 1] (1) {};
\draw (1.north west)--coordinate[pos=1] (w) ($(1.west)+(.5,0)$)--(1.south west)--(1.south east)--coordinate[pos=1] (z) ($(1.east)+(.5,0)$)--(1.north east)--cycle;
\node[align=center, font=\scriptsize] at($(w)!.4!(z)$) {Workload\\6};

\node[minimum width=1.75cm, minimum height=1.2cm, right=1.3mm of 1] (1) {};
\draw (1.north west)--coordinate[pos=1] (w) ($(1.west)+(.5,0)$)--(1.south west)--(1.south east)--coordinate[pos=1] (z) ($(1.east)+(.5,0)$)--(1.north east)--cycle;
\node[align=center, font=\scriptsize] at($(w)!.4!(z)$) {Workload\\7\\Workload\\8};

\node[minimum width=1.75cm, minimum height=1.2cm, right=1.3mm of 1] (1) {};
\draw (1.north west)--coordinate[pos=1] (w) ($(1.west)+(.5,0)$)--(1.south west)--(1.south east)--coordinate[pos=1] (z) ($(1.east)+(.5,0)$)--(1.north east)--cycle;
\node[align=center, font=\scriptsize] at($(w)!.4!(z)$) {Workload\\9\\Workload\\10};

%---------------
\node[above=1.6cm] at (r2.north) {Epoch 1};
\node[above=1.6cm] at (r1.north) {Epoch 2};
% Paths
\draw[-triangle 45] (b1)-| node[pos=.25, fill=white] {\small \textbf{Node Registers based on workload}} (b);
}
}
